(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/user"],{"0dc1":function(e,t,i){"use strict";i.r(t);var n=i("ca71"),s=i.n(n);for(var a in n)"default"!==a&&function(e){i.d(t,e,function(){return n[e]})}(a);t["default"]=s.a},aa54:function(e,t,i){"use strict";var n,s=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){e.certificates=1},e.e1=function(t){e.certificates=2})},a=[];i.d(t,"b",function(){return s}),i.d(t,"c",function(){return a}),i.d(t,"a",function(){return n})},c9cf:function(e,t,i){"use strict";i.r(t);var n=i("aa54"),s=i("0dc1");for(var a in s)"default"!==a&&function(e){i.d(t,e,function(){return s[e]})}(a);i("dbd4");var o,u=i("f0c5"),r=Object(u["a"])(s["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],o);t["default"]=r.exports},ca71:function(e,t,i){"use strict";(function(e,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i("5be0"),a=i("df0f"),o={data:function(){return{userForm:{name:"",user_head:"",avator:"",phone:"",sex:1,school:1,hobby:"",education:"",studentPhoto:"",graduationPhoto:""},defaultAvator:"https://hudongmsite.oss-cn-hangzhou.aliyuncs.com/meeting/basicYrC5Sh1570383607306.png",userInfo:{},isEdit:!1,imgList:[],imgList1:[],imgList2:[],index:-1,xueliList:["专科","本科","硕士","博士"],certificates:1}},onLoad:function(){this.getUserInfo(),this.isEdit=!1},onShow:function(){this.isEdit||this.getUserInfo()},methods:{showExample:function(){e.previewImage({urls:["http://qiniutest001.fensibox.com/cotenant_20191219_190935_26742"],current:"http://qiniutest001.fensibox.com/cotenant_20191219_190935_26742"})},pickerChange:function(e){this.index=e.detail.value,this.userForm.degree=this.xueliList[this.index]},loginOut:function(){e.showModal({title:"提示",content:"确定退出吗？",cancelText:"取消",confirmText:"确定",success:function(t){t.confirm&&(e.showToast({icon:"none",title:"退出成功"}),e.removeStorage({key:"Authentication",success:function(e){}}),setTimeout(function(){e.reLaunch({url:"/pages/login"})},300))}})},changeSex:function(e){this.userForm.sex=e.detail.value},chooseImage:function(){var t=this;n("log","chooseImagechooseImage"," at pages/user/user.vue:261"),e.chooseImage({count:1,sizeType:["original"],sourceType:["album"],success:function(e){n("log","successsuccesssuccess"," at pages/user/user.vue:267");var i=e.tempFilePaths[0];t.$api.getQnToken().then(function(e){a.upload(i,function(e){n("log",666," at pages/user/user.vue:271"),n("log",e.imageURL," at pages/user/user.vue:272"),t.imgList.push("http://".concat(e.imageURL)),n("log",9999," at pages/user/user.vue:274"),n("log",t.imgList[0]," at pages/user/user.vue:275")},function(e){},{region:"SCN",domain:"qiniutest001.fensibox.com",key:e.data.key,uptoken:e.data.uptoken})}).catch(function(e){})},fail:function(e){n("log","chooseImage fail",e," at pages/user/user.vue:286")}})},chooseImage1:function(){var t=this;e.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(e){var i=e.tempFilePaths[0];n("log","filePath",i," at pages/user/user.vue:298"),t.$api.getQnToken().then(function(e){a.upload(i,function(e){t.imgList1.push("http://".concat(e.imageURL))},function(e){},{region:"SCN",domain:"qiniutest001.fensibox.com",key:e.data.key,uptoken:e.data.uptoken})}).catch(function(e){})},fail:function(e){n("log","chooseImage fail",e," at pages/user/user.vue:312")}})},chooseImage2:function(){var t=this;if(!this.isEdit)return!1;e.chooseImage({count:1,sizeType:["original"],sourceType:["album"],success:function(e){var i=e.tempFilePaths[0];t.$api.getQnToken().then(function(e){a.upload(i,function(e){t.userForm.user_head="http://".concat(e.imageURL)},function(e){},{region:"SCN",domain:"qiniutest001.fensibox.com",key:e.data.key,uptoken:e.data.uptoken})}).catch(function(e){})},fail:function(e){n("log","chooseImage fail",e," at pages/user/user.vue:340")}})},ViewImage:function(t){e.previewImage({urls:this.imgList,current:t.currentTarget.dataset.url})},ViewImage1:function(t){e.previewImage({urls:this.imgList1,current:t.currentTarget.dataset.url})},DelImg:function(t){var i=this;e.showModal({title:"提示",content:"确定要删除吗？",cancelText:"再看看",confirmText:"删除",success:function(e){e.confirm&&i.imgList.splice(t.currentTarget.dataset.index,1)}})},DelImg1:function(t){var i=this;e.showModal({title:"提示",content:"确定要删除吗？",cancelText:"再看看",confirmText:"删除",success:function(e){e.confirm&&i.imgList1.splice(t.currentTarget.dataset.index,1)}})},DelImg2:function(t){var i=this;e.showModal({title:"提示",content:"确定要删除吗？",cancelText:"再看看",confirmText:"删除",success:function(e){e.confirm&&i.imgList2.splice(t.currentTarget.dataset.index,1)}})},toCollege:function(){e.navigateTo({url:"/pages/user/college"})},cancelSave:function(){this.isEdit=!1,this.getUserInfo()},saveUserInfo:function(){this.saveUserInfoAjax()},saveUserInfoAjax:function(){var t=this;if(this.userForm.nick_name)if(this.userForm.name)if(this.userForm.college){this.userForm.end_time&&s.format(this.userForm.end_time);var i={nick_name:this.userForm.nick_name,user_name:this.userForm.name,user_head:this.userForm.user_head,sex:this.userForm.sex,college:this.userForm.college,degree:this.xueliList[this.index],id_card_url:this.imgList[0]||"",diploma_url:this.imgList1[0]||"",interest:this.userForm.hobby,mobile:""};this.$api.updateUserInfo(i).then(function(i){e.showToast({icon:"none",title:"保存成功"}),t.isEdit=!1}).catch(function(e){})}else e.showToast({icon:"none",title:"学校不能为空"});else e.showToast({icon:"none",title:"姓名不能为空"});else e.showToast({icon:"none",title:"昵称不能为空"})},editUser:function(){var e=this;this.userForm.degree?this.xueliList.forEach(function(t,i){t==e.userForm.degree&&(e.index=i)}):this.index=-1,this.isEdit=!0},getUserInfo:function(){var e=this;this.$api.getUserInfo().then(function(t){e.userForm.nick_name=t.data.nick_name,e.userForm.name=t.data.user_name,e.userForm.user_head=t.data.user_head,e.userForm.sex=t.data.sex,e.userForm.college=t.data.college,e.userForm.degree=t.data.degree,e.userForm.start_time=s.toStringDate(t.data.start_time),e.userForm.end_time=s.toStringDate(t.data.end_time),n("log",t.data.start_time," at pages/user/user.vue:491"),n("log",t.data.end_time," at pages/user/user.vue:492"),n("log","测试开始时间"+s.toStringDate(t.data.start_time)," at pages/user/user.vue:493"),n("log","测试结束时间"+s.toStringDate(t.data.end_time)," at pages/user/user.vue:494"),e.imgList=t.data.id_card_url&&t.data.id_card_url.split()||[],e.imgList1=t.data.diploma_url&&t.data.diploma_url.split()||[],e.userForm.hobby=t.data.interest,t.data.id_card_url?e.certificates=1:t.data.diploma_url&&(e.certificates=2)}).catch(function(t){e.userForm={name:"",user_head:"",avator:"",phone:"",sex:1,school:1,start_time:"2016-08",end_time:"",hobby:"",education:"",studentPhoto:"",graduationPhoto:""}})}}};t.default=o}).call(this,i("6e42")["default"],i("0de9")["default"])},caac:function(e,t,i){},d3f1:function(e,t,i){"use strict";(function(e){i("24e0"),i("921b");n(i("66fd"));var t=n(i("c9cf"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,i("6e42")["createPage"])},dbd4:function(e,t,i){"use strict";var n=i("caac"),s=i.n(n);s.a}},[["d3f1","common/runtime","common/vendor"]]]);