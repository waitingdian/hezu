(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/chat/detail"],{"0916":function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=i(e("6050"));function i(t){return t&&t.__esModule?t:{default:t}}var a={globalData:{goeasy:null},data:function(){return{InputBottom:0,userInfo:{},chatDetail:{},sendContent:"",scrollTop:0,scrollAnimation:!1,recordTis:"手指上滑 取消发送",recording:!1,popupLayerClass:"",scrollToView:"",id:"",defaultAvator:"https://hudongmsite.oss-cn-hangzhou.aliyuncs.com/meeting/basicYrC5Sh1570383607306.png"}},onLoad:function(n){var e=this;this.id=n.id,this.getMessageFn(this.id),t.getStorage({key:"userInfo",success:function(t){e.userInfo=JSON.parse(t.data),e.userInfo&&e.userInfo.user_id||e.$store.dispatch("getuserinfo")}}),this.initGoeasy()},onShow:function(){this.scrollTop=9999999;this.$options.globalData;this.$options.globalData.goeasy||this.initGoeasy()},onHide:function(){this.$options.globalData.goeasy&&(this.$options.globalData.goeasy=null)},methods:{initGoeasy:function(){var n=this,e=this.$options.globalData;e.goeasy=new o.default({host:"hangzhou.goeasy.io",appkey:"BC-0a302f5f67764730b09e4be87bf06f0f",onConnected:function(){},onDisconnected:function(){console.log("连接断开！")},onConnectFailed:function(t){console.log("连接失败或错误！")}}),e.goeasy.subscribe({channel:this.userInfo.user_id,onMessage:function(e){n.getMessageFn(n.id),t.vibrateLong()}})},goMyRent:function(n){this.$api.getGroupId({userId:n}).then(function(n){n.data&&n.data.group_id&&t.showModal({title:"提示",content:"是否跳转至参团详情？",cancelText:"取消",confirmText:"确定",success:function(e){e.confirm&&t.navigateTo({url:"/pages/home/detail?id=".concat(n.data.group_id)})}}),console.log("========",n)}).catch(function(t){})},openDrawer:function(){this.popupLayerClass="showLayer"},hideDrawer:function(){var t=this;this.popupLayerClass="",setTimeout(function(){t.hideMore=!0,t.hideEmoji=!0},150)},textareaFocus:function(){"showLayer"==this.popupLayerClass&&0==this.hideMore&&this.hideDrawer()},BackPage:function(){t.navigateBack({delta:1})},sendMessage:function(){var t=this;if(!this.sendContent)return!1;this.$api.sendChat({receive_user_id:this.id,content:this.sendContent}).then(function(n){t.sendContent="",t.getMessageFn(t.id)}).catch(function(t){})},getMessageFn:function(t){var n=this;this.$api.getMessage({receive_user_id:t}).then(function(t){t.data.chatMessageVMList.forEach(function(t){t.send_user_id==n.userInfo.user_id?t.type=1:t.type=2}),n.chatDetail=t.data,n.$nextTick(function(){this.scrollTop=this.scrollTop+1,this.$nextTick(function(){this.scrollAnimation=!0})})}).catch(function(t){})},InputFocus:function(t){t.detail.height;this.InputBottom=t.detail.height},InputBlur:function(t){this.InputBottom=0},discard:function(){}}};n.default=a}).call(this,e("543d")["default"])},"0d33":function(t,n,e){"use strict";var o=e("b23c"),i=e.n(o);i.a},"21e6":function(t,n,e){"use strict";e.r(n);var o=e("0916"),i=e.n(o);for(var a in o)"default"!==a&&function(t){e.d(n,t,function(){return o[t]})}(a);n["default"]=i.a},"574e":function(t,n,e){"use strict";var o=function(){var t=this,n=t.$createElement;t._self._c},i=[];e.d(n,"a",function(){return o}),e.d(n,"b",function(){return i})},"6aca":function(t,n,e){"use strict";(function(t){e("9bf5"),e("921b");o(e("66fd"));var n=o(e("d128"));function o(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("543d")["createPage"])},b23c:function(t,n,e){},d128:function(t,n,e){"use strict";e.r(n);var o=e("574e"),i=e("21e6");for(var a in i)"default"!==a&&function(t){e.d(n,t,function(){return i[t]})}(a);e("0d33");var s=e("2877"),u=Object(s["a"])(i["default"],o["a"],o["b"],!1,null,null,null);n["default"]=u.exports}},[["6aca","common/runtime","common/vendor"]]]);